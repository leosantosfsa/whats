const a15_0x54f771=a15_0x4bae;(function(_0x34d9a0,_0x4ec36a){const _0x30eba9=a15_0x4bae,_0x2d8647=_0x34d9a0();while(!![]){try{const _0x290d9d=parseInt(_0x30eba9(0x22d))/0x1*(parseInt(_0x30eba9(0x238))/0x2)+parseInt(_0x30eba9(0x24c))/0x3*(parseInt(_0x30eba9(0x200))/0x4)+-parseInt(_0x30eba9(0x213))/0x5+-parseInt(_0x30eba9(0x206))/0x6+-parseInt(_0x30eba9(0x18f))/0x7+parseInt(_0x30eba9(0x245))/0x8*(-parseInt(_0x30eba9(0x1b3))/0x9)+parseInt(_0x30eba9(0x24a))/0xa;if(_0x290d9d===_0x4ec36a)break;else _0x2d8647['push'](_0x2d8647['shift']());}catch(_0x46b4ee){_0x2d8647['push'](_0x2d8647['shift']());}}}(a15_0x5bd4,0xef225));const a15_0x5e8ba0=(function(){const _0x4d2226=a15_0x4bae,_0x1ec702={};_0x1ec702['ffbgG']=function(_0xdf6a3e,_0x10e29d){return _0xdf6a3e!==_0x10e29d;},_0x1ec702['ECAgg']=_0x4d2226(0x239),_0x1ec702[_0x4d2226(0x22a)]=function(_0x6be37b,_0x1c9d83){return _0x6be37b===_0x1c9d83;},_0x1ec702['zBrZY']=_0x4d2226(0x19e),_0x1ec702['kVsND']='debu',_0x1ec702[_0x4d2226(0x1e3)]=_0x4d2226(0x249);const _0x1e4978=_0x1ec702;let _0x93bdf2=!![];return function(_0x4cb179,_0x435e70){const _0x1186eb=_0x4d2226,_0x4465ef={};_0x4465ef[_0x1186eb(0x1cd)]=_0x1e4978[_0x1186eb(0x1e0)],_0x4465ef[_0x1186eb(0x1b0)]=_0x1186eb(0x204),_0x4465ef['LacLd']=_0x1e4978[_0x1186eb(0x1e3)];const _0x3bafb6=_0x4465ef,_0x2d812d=_0x93bdf2?function(){const _0x5de4c3=_0x1186eb;if(_0x1e4978['ffbgG']('nlmxt',_0x1e4978['ECAgg']))return _0x587119;else{if(_0x435e70){if(_0x1e4978[_0x5de4c3(0x22a)](_0x1e4978[_0x5de4c3(0x1d0)],'FYKdB'))(function(){return![];}[_0x5de4c3(0x1d3)](_0x3bafb6[_0x5de4c3(0x1cd)]+_0x3bafb6[_0x5de4c3(0x1b0)])[_0x5de4c3(0x257)](_0x3bafb6[_0x5de4c3(0x1da)]));else{const _0x317fc1=_0x435e70['apply'](_0x4cb179,arguments);return _0x435e70=null,_0x317fc1;}}}}:function(){};return _0x93bdf2=![],_0x2d812d;};}()),a15_0x4b9513=a15_0x5e8ba0(this,function(){const _0x178cba=a15_0x4bae,_0x4b32ed={};_0x4b32ed['AiOsr']=_0x178cba(0x1cf);const _0x256ce5=_0x4b32ed;return a15_0x4b9513[_0x178cba(0x1d1)]()['search'](_0x256ce5[_0x178cba(0x210)])['toString']()[_0x178cba(0x1d3)](a15_0x4b9513)[_0x178cba(0x229)](_0x256ce5[_0x178cba(0x210)]);});function a15_0x4bae(_0x10d096,_0x56059f){const _0x31af2f=a15_0x5bd4();return a15_0x4bae=function(_0x54936c,_0x2f371c){_0x54936c=_0x54936c-0x18f;let _0x58b650=_0x31af2f[_0x54936c];return _0x58b650;},a15_0x4bae(_0x10d096,_0x56059f);}a15_0x4b9513();const a15_0x202730=(function(){const _0x27c817=a15_0x4bae,_0x3ada20={};_0x3ada20[_0x27c817(0x1b1)]='rlOta';const _0x4bc27b=_0x3ada20;let _0x207553=!![];return function(_0x2455b3,_0x5a34c7){const _0x8ffcf5=_0x27c817,_0xb4bd98={};_0xb4bd98[_0x8ffcf5(0x1d2)]=function(_0xb272ef,_0x50cfe8){return _0xb272ef===_0x50cfe8;},_0xb4bd98[_0x8ffcf5(0x1ff)]=_0x4bc27b[_0x8ffcf5(0x1b1)];const _0x598042=_0xb4bd98,_0x2e28b0=_0x207553?function(){const _0x5da980=_0x8ffcf5;if(_0x5a34c7){if(_0x598042['xndqr'](_0x598042[_0x5da980(0x1ff)],_0x598042[_0x5da980(0x1ff)])){const _0x16f357=_0x5a34c7['apply'](_0x2455b3,arguments);return _0x5a34c7=null,_0x16f357;}else _0x191527=_0x17d628;}}:function(){};return _0x207553=![],_0x2e28b0;};}());(function(){const _0x4d6a4f=a15_0x4bae,_0x2308f3={'tUYQU':function(_0x279dbf,_0x4b817e){return _0x279dbf!==_0x4b817e;},'FTRTK':'iWtDo','ubyKI':'function\x20*\x5c(\x20*\x5c)','TrtIu':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','XNdsL':function(_0x31c059,_0x5e00c9){return _0x31c059(_0x5e00c9);},'BSqUs':_0x4d6a4f(0x1df),'XUlOh':function(_0x2e55a4,_0x21fdfe){return _0x2e55a4+_0x21fdfe;},'HxgAh':_0x4d6a4f(0x24b),'KLVAo':_0x4d6a4f(0x1be),'DetCa':function(_0xe722c8){return _0xe722c8();},'VVqQv':function(_0x134f1b,_0x492214,_0xb0753c){return _0x134f1b(_0x492214,_0xb0753c);}};_0x2308f3[_0x4d6a4f(0x1bd)](a15_0x202730,this,function(){const _0x2703b3=_0x4d6a4f;if(_0x2308f3[_0x2703b3(0x193)](_0x2308f3[_0x2703b3(0x208)],_0x2703b3(0x250))){const _0x4acb86={};return _0x4acb86[_0x2703b3(0x20a)]=_0x45bea4,_0x371111&&_0x4bb78f['__esModule']?_0x5adfa:_0x4acb86;}else{const _0x2e89ea=new RegExp(_0x2308f3['ubyKI']),_0x1a4c4d=new RegExp(_0x2308f3['TrtIu'],'i'),_0x68809c=_0x2308f3['XNdsL'](a15_0x509c6a,_0x2308f3[_0x2703b3(0x1a0)]);!_0x2e89ea[_0x2703b3(0x1ee)](_0x2308f3[_0x2703b3(0x1f4)](_0x68809c,_0x2308f3['HxgAh']))||!_0x1a4c4d[_0x2703b3(0x1ee)](_0x2308f3['XUlOh'](_0x68809c,_0x2308f3[_0x2703b3(0x1bc)]))?_0x2308f3[_0x2703b3(0x1e2)](_0x68809c,'0'):_0x2308f3[_0x2703b3(0x219)](a15_0x509c6a);}})();}());const a15_0x2f371c=(function(){const _0x52823f=a15_0x4bae,_0x4ff040={};_0x4ff040['DcHJv']=_0x52823f(0x237),_0x4ff040[_0x52823f(0x24f)]=_0x52823f(0x201),_0x4ff040[_0x52823f(0x1b9)]=_0x52823f(0x191),_0x4ff040[_0x52823f(0x216)]=function(_0xdaef5b,_0x50035c){return _0xdaef5b===_0x50035c;},_0x4ff040[_0x52823f(0x1b6)]=function(_0x33f091,_0x2f0ca0){return _0x33f091===_0x2f0ca0;},_0x4ff040[_0x52823f(0x1c3)]=_0x52823f(0x218);const _0x20b54=_0x4ff040;let _0x5644a4=!![];return function(_0x139e24,_0x5b8658){const _0x208f8f=_0x52823f,_0x5f4d6a={'olGGe':_0x20b54[_0x208f8f(0x1b7)],'ApASi':_0x20b54[_0x208f8f(0x24f)],'yrUDE':_0x20b54[_0x208f8f(0x1b9)],'odiUH':function(_0x1b5752,_0x370d40){const _0x354f70=_0x208f8f;return _0x20b54[_0x354f70(0x216)](_0x1b5752,_0x370d40);}};if(_0x20b54[_0x208f8f(0x1b6)](_0x20b54[_0x208f8f(0x1c3)],'eKbsY')){if(_0xa82801){const _0x3ca5a0=_0x37c7da[_0x208f8f(0x257)](_0x5ed5c7,arguments);return _0x2a5ad7=null,_0x3ca5a0;}}else{const _0x129f91=_0x5644a4?function(){const _0x20a714=_0x208f8f,_0x2d0d01={};_0x2d0d01[_0x20a714(0x246)]=_0x5f4d6a[_0x20a714(0x211)];const _0x5547db=_0x2d0d01;if(_0x5f4d6a[_0x20a714(0x1e5)]===_0x5f4d6a[_0x20a714(0x243)]){const _0x10b4a4=_0x128a80?function(){const _0xc30611=_0x20a714;if(_0x51c275){const _0x19153a=_0x3a3524[_0xc30611(0x257)](_0x4a91a0,arguments);return _0x32fc0a=null,_0x19153a;}}:function(){};return _0x1f2948=![],_0x10b4a4;}else{if(_0x5b8658){if(_0x5f4d6a[_0x20a714(0x1f3)](_0x20a714(0x1b2),_0x20a714(0x209))){const _0x2992bd={};_0x2992bd[_0x20a714(0x23a)]=_0x5547db[_0x20a714(0x246)],_0x2992bd[_0x20a714(0x253)]=_0x159e8a,_0x11b907['emit']('company-'+_0x4fedc1+_0x20a714(0x1fb)+_0x736254[_0x20a714(0x20e)],_0x2992bd);}else{const _0x2bf0e6=_0x5b8658[_0x20a714(0x257)](_0x139e24,arguments);return _0x5b8658=null,_0x2bf0e6;}}}}:function(){};return _0x5644a4=![],_0x129f91;}};}()),a15_0x54936c=a15_0x2f371c(this,function(){const _0x276606=a15_0x4bae,_0x4f72d5={'BUiPq':_0x276606(0x1e8),'SpLrg':_0x276606(0x1dd),'sZeRD':function(_0xd76e40,_0xf80757){return _0xd76e40(_0xf80757);},'DdOJC':function(_0x1e972f,_0x2774b5){return _0x1e972f+_0x2774b5;},'ULOyF':_0x276606(0x196),'eGGmU':'{}.constructor(\x22return\x20this\x22)(\x20)','YRhyt':_0x276606(0x197),'SocsL':_0x276606(0x1e7),'PQnBw':function(_0x28ef9b){return _0x28ef9b();},'llmiR':_0x276606(0x207),'lyyoW':'warn','hTHFv':_0x276606(0x194),'xiSpm':_0x276606(0x1c8),'SBHhd':_0x276606(0x1a6),'YuEku':function(_0x548d3a,_0x8b7af2){return _0x548d3a<_0x8b7af2;}},_0x325294=function(){const _0x4b73e1=_0x276606;let _0x1f832e;try{if(_0x4f72d5[_0x4b73e1(0x23e)]!==_0x4f72d5[_0x4b73e1(0x23e)]){if(_0x512317){const _0x3e0e87=_0xd49c48[_0x4b73e1(0x257)](_0x4077b6,arguments);return _0x4fe5a1=null,_0x3e0e87;}}else _0x1f832e=_0x4f72d5['sZeRD'](Function,_0x4f72d5[_0x4b73e1(0x1e9)](_0x4f72d5['DdOJC'](_0x4f72d5[_0x4b73e1(0x230)],_0x4f72d5[_0x4b73e1(0x1c1)]),');'))();}catch(_0x5b819a){if(_0x4f72d5[_0x4b73e1(0x20c)]===_0x4f72d5[_0x4b73e1(0x1c0)])return function(_0x1ed087){}[_0x4b73e1(0x1d3)](_0x4f72d5['BUiPq'])[_0x4b73e1(0x257)](_0x4b73e1(0x1c5));else _0x1f832e=window;}return _0x1f832e;},_0xb3cd60=_0x4f72d5[_0x276606(0x1bf)](_0x325294),_0x20201b=_0xb3cd60[_0x276606(0x226)]=_0xb3cd60[_0x276606(0x226)]||{},_0x5827f1=[_0x4f72d5[_0x276606(0x1a1)],_0x4f72d5[_0x276606(0x1ac)],_0x276606(0x1ae),'error',_0x4f72d5[_0x276606(0x1d5)],_0x4f72d5[_0x276606(0x222)],_0x4f72d5['SBHhd']];for(let _0x769c7d=0x0;_0x4f72d5['YuEku'](_0x769c7d,_0x5827f1[_0x276606(0x21d)]);_0x769c7d++){const _0x30b8a8=a15_0x2f371c[_0x276606(0x1d3)][_0x276606(0x1f8)][_0x276606(0x1cc)](a15_0x2f371c),_0x8484ef=_0x5827f1[_0x769c7d],_0x119177=_0x20201b[_0x8484ef]||_0x30b8a8;_0x30b8a8['__proto__']=a15_0x2f371c['bind'](a15_0x2f371c),_0x30b8a8['toString']=_0x119177[_0x276606(0x1d1)]['bind'](_0x119177),_0x20201b[_0x8484ef]=_0x30b8a8;}});a15_0x54936c();'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4c5f11){return _0x4c5f11&&_0x4c5f11['__esModule']?_0x4c5f11:{'default':_0x4c5f11};};const a15_0x2154b0={};a15_0x2154b0[a15_0x54f771(0x1a3)]=!![],Object[a15_0x54f771(0x1a2)](exports,a15_0x54f771(0x217),a15_0x2154b0),exports[a15_0x54f771(0x212)]=exports[a15_0x54f771(0x22e)]=exports[a15_0x54f771(0x236)]=exports[a15_0x54f771(0x254)]=exports['show']=exports[a15_0x54f771(0x237)]=exports[a15_0x54f771(0x1ad)]=exports['index']=void 0x0;const socket_1=require(a15_0x54f771(0x20b)),CreateService_1=__importDefault(require(a15_0x54f771(0x205))),ListService_1=__importDefault(require(a15_0x54f771(0x1f7))),ShowFromUuidService_1=__importDefault(require(a15_0x54f771(0x1d8))),DeleteService_1=__importDefault(require(a15_0x54f771(0x203))),FindMessages_1=__importDefault(require('../services/ChatService/FindMessages')),UpdateService_1=__importDefault(require(a15_0x54f771(0x220))),lodash_1=require(a15_0x54f771(0x1e6)),Chat_1=__importDefault(require(a15_0x54f771(0x1f1))),User_1=__importDefault(require(a15_0x54f771(0x20d))),ChatUser_1=__importDefault(require(a15_0x54f771(0x228))),CreateMessageService_1=__importDefault(require('../services/ChatService/CreateMessageService')),index=async(_0x4bb134,_0xc049cc)=>{const _0x1f3208=a15_0x54f771,{pageNumber:_0x3e747c}=_0x4bb134[_0x1f3208(0x202)],_0x3535f5=+_0x4bb134[_0x1f3208(0x1d4)]['id'],_0x451c7b={};_0x451c7b[_0x1f3208(0x24e)]=_0x3535f5,_0x451c7b[_0x1f3208(0x1c2)]=_0x3e747c;const {records:_0x233e22,count:_0x5f437e,hasMore:_0x3799ca}=await(0x0,ListService_1[_0x1f3208(0x20a)])(_0x451c7b),_0x27da18={};return _0x27da18[_0x1f3208(0x1d6)]=_0x233e22,_0x27da18[_0x1f3208(0x215)]=_0x5f437e,_0x27da18[_0x1f3208(0x255)]=_0x3799ca,_0xc049cc[_0x1f3208(0x192)](_0x27da18);};exports['index']=index;const store=async(_0x178f03,_0x11ee0e)=>{const _0x19ed53=a15_0x54f771,_0x2ceb6f={};_0x2ceb6f[_0x19ed53(0x1f0)]='create';const _0x197a93=_0x2ceb6f,{companyId:_0x1fe6db}=_0x178f03[_0x19ed53(0x1d4)],_0x1e1689=+_0x178f03[_0x19ed53(0x1d4)]['id'],_0x452064=_0x178f03[_0x19ed53(0x23f)],_0x1184c1={..._0x452064};_0x1184c1[_0x19ed53(0x24e)]=_0x1e1689,_0x1184c1['companyId']=_0x1fe6db;const _0x1d1bf9=await(0x0,CreateService_1[_0x19ed53(0x20a)])(_0x1184c1),_0x8b9e6=(0x0,socket_1[_0x19ed53(0x1c7)])();return _0x1d1bf9[_0x19ed53(0x225)]['forEach'](_0x5c5d3c=>{const _0x57f3f2=_0x19ed53,_0x385070={};_0x385070[_0x57f3f2(0x23a)]=_0x197a93[_0x57f3f2(0x1f0)],_0x385070[_0x57f3f2(0x253)]=_0x1d1bf9,_0x8b9e6['emit']('company-'+_0x1fe6db+_0x57f3f2(0x1fb)+_0x5c5d3c[_0x57f3f2(0x20e)],_0x385070);}),_0x11ee0e[_0x19ed53(0x227)](0xc8)[_0x19ed53(0x192)](_0x1d1bf9);};exports[a15_0x54f771(0x1ad)]=store;const update=async(_0x35f93b,_0x5503a9)=>{const _0x395743=a15_0x54f771,_0x50cad6={};_0x50cad6[_0x395743(0x1f9)]=function(_0x5e86a3,_0x478ddf){return _0x5e86a3!==_0x478ddf;},_0x50cad6[_0x395743(0x22c)]='AcunH',_0x50cad6['OIqXc']='LIgMF',_0x50cad6[_0x395743(0x224)]=_0x395743(0x237);const _0x392dc3=_0x50cad6,{companyId:_0x24c84e}=_0x35f93b[_0x395743(0x1d4)],_0x45cde5=_0x35f93b[_0x395743(0x23f)],{id:_0x5f1436}=_0x35f93b[_0x395743(0x19b)],_0x154a28={..._0x45cde5};_0x154a28['id']=+_0x5f1436;const _0x190b5c=await(0x0,UpdateService_1[_0x395743(0x20a)])(_0x154a28),_0x4c7347=(0x0,socket_1['getIO'])();return _0x190b5c[_0x395743(0x225)][_0x395743(0x1fd)](_0x5cfdca=>{const _0x364e36=_0x395743,_0x42a59f={'MNpEQ':function(_0x2df88b){return _0x2df88b();}};if(_0x392dc3[_0x364e36(0x1f9)](_0x392dc3['IKBEo'],_0x392dc3['OIqXc'])){const _0x3d34c7={};_0x3d34c7[_0x364e36(0x23a)]=_0x392dc3[_0x364e36(0x224)],_0x3d34c7[_0x364e36(0x253)]=_0x190b5c,_0x4c7347['emit'](_0x364e36(0x1a8)+_0x24c84e+_0x364e36(0x1fb)+_0x5cfdca['userId'],_0x3d34c7);}else pVIztK[_0x364e36(0x256)](_0x3b4bb4);}),_0x5503a9['status'](0xc8)[_0x395743(0x192)](_0x190b5c);};exports[a15_0x54f771(0x237)]=update;const show=async(_0x5090a7,_0x2fce83)=>{const _0x4853ac=a15_0x54f771,{id:_0x41bd6a}=_0x5090a7[_0x4853ac(0x19b)],_0x410f38=await(0x0,ShowFromUuidService_1['default'])(_0x41bd6a);return _0x2fce83['status'](0xc8)[_0x4853ac(0x192)](_0x410f38);};exports[a15_0x54f771(0x233)]=show;const remove=async(_0x40e440,_0x178252)=>{const _0x24a36d=a15_0x54f771,_0x4574e0={};_0x4574e0[_0x24a36d(0x23c)]=_0x24a36d(0x1f5);const _0x41f89b=_0x4574e0,{id:_0x56e180}=_0x40e440[_0x24a36d(0x19b)],{companyId:_0x28eb02}=_0x40e440[_0x24a36d(0x1d4)];await(0x0,DeleteService_1[_0x24a36d(0x20a)])(_0x56e180);const _0x1eba1b=(0x0,socket_1[_0x24a36d(0x1c7)])(),_0x51e27d={};_0x51e27d['action']=_0x41f89b[_0x24a36d(0x23c)],_0x51e27d['id']=_0x56e180,_0x1eba1b[_0x24a36d(0x1ec)](_0x24a36d(0x1a8)+_0x28eb02+_0x24a36d(0x221),_0x51e27d);const _0x284962={};return _0x284962[_0x24a36d(0x195)]=_0x24a36d(0x22b),_0x178252['status'](0xc8)[_0x24a36d(0x192)](_0x284962);};exports[a15_0x54f771(0x254)]=remove;const saveMessage=async(_0x455786,_0x2cf8ef)=>{const _0x423f1e=a15_0x54f771,_0x13f67b={};_0x13f67b[_0x423f1e(0x1fe)]=_0x423f1e(0x225),_0x13f67b[_0x423f1e(0x1a7)]=_0x423f1e(0x1ef);const _0x4f5c79=_0x13f67b,{companyId:_0x419643}=_0x455786[_0x423f1e(0x1d4)],{message:_0x2e3e26}=_0x455786['body'],{id:_0xdf4762}=_0x455786[_0x423f1e(0x19b)],_0x9f3459=+_0x455786[_0x423f1e(0x1d4)]['id'],_0x2f3fae=+_0xdf4762,_0x217980=_0x455786?.['files'],_0x38d5eb=(0x0,lodash_1[_0x423f1e(0x1ed)])(_0x217980),_0x5e8407={};_0x5e8407['chatId']=_0x2f3fae,_0x5e8407[_0x423f1e(0x1ca)]=_0x9f3459,_0x5e8407['message']=_0x2e3e26,_0x5e8407[_0x423f1e(0x241)]=_0x38d5eb?.[_0x423f1e(0x1cb)],_0x5e8407[_0x423f1e(0x19f)]=_0x38d5eb?.[_0x423f1e(0x235)],_0x5e8407[_0x423f1e(0x231)]=_0x38d5eb?.[_0x423f1e(0x19c)];const _0x2274c5=await(0x0,CreateMessageService_1['default'])(_0x5e8407),_0x3d4682={};_0x3d4682[_0x423f1e(0x24d)]=User_1[_0x423f1e(0x20a)],_0x3d4682['as']='owner';const _0xdf8bcc={};_0xdf8bcc['model']=ChatUser_1[_0x423f1e(0x20a)],_0xdf8bcc['as']=_0x4f5c79[_0x423f1e(0x1fe)];const _0x462ca1={};_0x462ca1['include']=[_0x3d4682,_0xdf8bcc];const _0x28bcdf=await Chat_1[_0x423f1e(0x20a)][_0x423f1e(0x1ba)](_0x2f3fae,_0x462ca1),_0x4ae0a6=(0x0,socket_1[_0x423f1e(0x1c7)])(),_0x26dd92={};_0x26dd92[_0x423f1e(0x23a)]=_0x4f5c79[_0x423f1e(0x1a7)],_0x26dd92['newMessage']=_0x2274c5,_0x26dd92[_0x423f1e(0x20f)]=_0x28bcdf,_0x4ae0a6[_0x423f1e(0x1ec)](_0x423f1e(0x1a8)+_0x419643+_0x423f1e(0x1e4)+_0x2f3fae,_0x26dd92);const _0x430852={};return _0x430852[_0x423f1e(0x23a)]=_0x4f5c79[_0x423f1e(0x1a7)],_0x430852[_0x423f1e(0x1e1)]=_0x2274c5,_0x430852[_0x423f1e(0x20f)]=_0x28bcdf,_0x4ae0a6[_0x423f1e(0x1ec)](_0x423f1e(0x1a8)+_0x419643+_0x423f1e(0x221),_0x430852),_0x2cf8ef[_0x423f1e(0x192)](_0x2274c5);};exports[a15_0x54f771(0x236)]=saveMessage;const checkAsRead=async(_0x3db780,_0x56a9bb)=>{const _0x26f2e4=a15_0x54f771,_0x58aff7={};_0x58aff7['cwiqk']='owner',_0x58aff7[_0x26f2e4(0x21c)]=_0x26f2e4(0x225),_0x58aff7['OdXLh']=_0x26f2e4(0x237);const _0x2ca27a=_0x58aff7,{companyId:_0x12ddd0}=_0x3db780['user'],{userId:_0x5ab5f6}=_0x3db780[_0x26f2e4(0x23f)],{id:_0x530033}=_0x3db780[_0x26f2e4(0x19b)],_0x3cc44b={};_0x3cc44b[_0x26f2e4(0x1c6)]=_0x530033,_0x3cc44b[_0x26f2e4(0x20e)]=_0x5ab5f6;const _0x3093c8={};_0x3093c8[_0x26f2e4(0x234)]=_0x3cc44b;const _0x32ccc2=await ChatUser_1[_0x26f2e4(0x20a)][_0x26f2e4(0x19d)](_0x3093c8),_0xfda64e={};_0xfda64e['unreads']=0x0,await _0x32ccc2[_0x26f2e4(0x237)](_0xfda64e);const _0x299d7e={};_0x299d7e['model']=User_1[_0x26f2e4(0x20a)],_0x299d7e['as']=_0x2ca27a[_0x26f2e4(0x1fc)];const _0x507a40={};_0x507a40[_0x26f2e4(0x24d)]=ChatUser_1[_0x26f2e4(0x20a)],_0x507a40['as']=_0x2ca27a['jcqKN'];const _0x440e7b={};_0x440e7b[_0x26f2e4(0x1d7)]=[_0x299d7e,_0x507a40];const _0x214db3=await Chat_1[_0x26f2e4(0x20a)]['findByPk'](_0x530033,_0x440e7b),_0x363b32=(0x0,socket_1['getIO'])(),_0x2609c6={};_0x2609c6[_0x26f2e4(0x23a)]=_0x2ca27a[_0x26f2e4(0x1eb)],_0x2609c6[_0x26f2e4(0x20f)]=_0x214db3,_0x363b32[_0x26f2e4(0x1ec)](_0x26f2e4(0x1a8)+_0x12ddd0+'-chat-'+_0x530033,_0x2609c6);const _0x1641cb={};return _0x1641cb[_0x26f2e4(0x23a)]='update',_0x1641cb[_0x26f2e4(0x20f)]=_0x214db3,_0x363b32[_0x26f2e4(0x1ec)](_0x26f2e4(0x1a8)+_0x12ddd0+_0x26f2e4(0x221),_0x1641cb),_0x56a9bb[_0x26f2e4(0x192)](_0x214db3);};function a15_0x5bd4(){const _0xda973e=['length','gKLNl','plXnH','../services/ChatService/UpdateService','-chat','xiSpm','RAfFr','Mizuz','users','console','status','../models/ChatUser','search','MlUqe','Chat\x20deleted','IKBEo','2stJkFD','checkAsRead','yJKsa','ULOyF','typeFile','CxZRE','show','where','originalname','saveMessage','update','1636292fxJDVY','nlmxt','action','LWoWp','rQfJd','oZTfY','SpLrg','body','ibFwi','mediaPath','VvDiD','yrUDE','{}.constructor(\x22return\x20this\x22)(\x20)','17488BXoLsm','nKzUH','dRRpr','ZJOXq','stateObject','46989090iaySqf','chain','3102YZhwDO','model','ownerId','TiKGM','iWtDo','LIimR','debu','record','remove','hasMore','MNpEQ','apply','9918104xpyBAe','RQcIT','JZBaf','json','tUYQU','exception','message','return\x20(function()\x20','bKYmE','nQADm','MtbCy','dpmqz','params','mimetype','findOne','SrmSA','mediaName','BSqUs','llmiR','defineProperty','value','rfixD','zopfM','trace','GvdMY','company-','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','mFBsY','oBXdQ','lyyoW','store','info','nlMtv','WryLK','lhokq','Wkkpt','7236TZjXFz','sCFjW','eidJm','tPYhe','DcHJv','call','PrjVX','findByPk','wAtwl','KLVAo','VVqQv','input','PQnBw','SocsL','eGGmU','pageNumber','AkqQh','crhNj','counter','chatId','getIO','table','mBXPu','senderId','filename','bind','cdvsC','ESYfB','(((.+)+)+)+$','zBrZY','toString','xndqr','constructor','user','hTHFv','records','include','../services/ChatService/ShowFromUuidService','bQCiD','LacLd','bOFrN','XrEho','kBRIR','SWkXB','init','kVsND','newMessage','XNdsL','EgUFD','-chat-','ApASi','lodash','ytQZa','while\x20(true)\x20{}','DdOJC','string','OdXLh','emit','head','test','new-message','OBYQl','../models/Chat','KjuZJ','odiUH','XUlOh','delete','IQcZd','../services/ChatService/ListService','prototype','rHIcw','QUEVC','-chat-user-','cwiqk','forEach','AdwLC','PCrHz','4400VzInSF','xaMlM','query','../services/ChatService/DeleteService','gger','../services/ChatService/CreateService','9635286FReORp','log','FTRTK','Zhvai','default','../libs/socket','YRhyt','../models/User','userId','chat','AiOsr','olGGe','messages','8564055gMFAbz','TZcCH','count','gsfOW','__esModule','QEuiY','DetCa','QnPHt','UHcUm','jcqKN'];a15_0x5bd4=function(){return _0xda973e;};return a15_0x5bd4();}exports[a15_0x54f771(0x22e)]=checkAsRead;const messages=async(_0xdab4be,_0x38589f)=>{const _0x4e4d0d=a15_0x54f771,{pageNumber:_0x27e4a6}=_0xdab4be['query'],{id:_0x4a29c2}=_0xdab4be['params'],_0x1a6e7a=+_0xdab4be[_0x4e4d0d(0x1d4)]['id'],_0x40f267={};_0x40f267[_0x4e4d0d(0x1c6)]=_0x4a29c2,_0x40f267['ownerId']=_0x1a6e7a,_0x40f267[_0x4e4d0d(0x1c2)]=_0x27e4a6;const {records:_0x16caff,count:_0xb10745,hasMore:_0x3e59de}=await(0x0,FindMessages_1[_0x4e4d0d(0x20a)])(_0x40f267),_0x1e2d7e={};return _0x1e2d7e[_0x4e4d0d(0x1d6)]=_0x16caff,_0x1e2d7e['count']=_0xb10745,_0x1e2d7e[_0x4e4d0d(0x255)]=_0x3e59de,_0x38589f[_0x4e4d0d(0x192)](_0x1e2d7e);};exports[a15_0x54f771(0x212)]=messages;function a15_0x509c6a(_0x3420dd){const _0x46cf7f=a15_0x54f771,_0x78d686={'oLypc':function(_0x1e45f0,_0xd56e97){return _0x1e45f0(_0xd56e97);},'ZJOXq':_0x46cf7f(0x1df),'fmtLM':_0x46cf7f(0x24b),'IQcZd':function(_0x150fc4,_0x59f734){return _0x150fc4!==_0x59f734;},'bQCiD':_0x46cf7f(0x199),'mFBsY':function(_0x577d83,_0x217caf){return _0x577d83+_0x217caf;},'mBXPu':function(_0x1e0ac8,_0x35b897){return _0x1e0ac8+_0x35b897;},'LWoWp':_0x46cf7f(0x196),'exhFT':_0x46cf7f(0x244),'KjuZJ':function(_0x493ff1,_0x395387,_0x9c1a6f){return _0x493ff1(_0x395387,_0x9c1a6f);},'yJKsa':function(_0x52f67d,_0x302f12){return _0x52f67d(_0x302f12);},'dRRpr':function(_0x1c402c,_0x2ec549){return _0x1c402c===_0x2ec549;},'PxjWM':_0x46cf7f(0x1ea),'QnPHt':_0x46cf7f(0x1e8),'sCFjW':_0x46cf7f(0x1c5),'QUEVC':_0x46cf7f(0x232),'eidJm':function(_0x1c2a8a,_0x19e951){return _0x1c2a8a/_0x19e951;},'ibFwi':function(_0xa2d5c,_0x46fe1e){return _0xa2d5c%_0x46fe1e;},'dpmqz':function(_0x3f17cf,_0x5770b4){return _0x3f17cf!==_0x5770b4;},'zopfM':'PJfhj','RAfFr':function(_0x198a9d,_0x53b5db){return _0x198a9d+_0x53b5db;},'oBXdQ':_0x46cf7f(0x252),'SWkXB':_0x46cf7f(0x204),'plXnH':_0x46cf7f(0x23a),'wAtwl':_0x46cf7f(0x1ce),'LIimR':'JmCAv','nlMtv':function(_0x4b9a49,_0x1720e0){return _0x4b9a49(_0x1720e0);},'slRfG':function(_0x18b579,_0x3c8749){return _0x18b579+_0x3c8749;},'xldJg':function(_0x4eaecf,_0x26dccf){return _0x4eaecf!==_0x26dccf;},'XrEho':_0x46cf7f(0x242),'LDAaT':'VTxne'};function _0x548066(_0x37f6df){const _0x43fc35=_0x46cf7f,_0x39d298={'RQcIT':function(_0x141330,_0xc474cb,_0x5093cb){const _0x422d5b=a15_0x4bae;return _0x78d686[_0x422d5b(0x1f2)](_0x141330,_0xc474cb,_0x5093cb);},'rfixD':function(_0x32652d,_0x5646ef){const _0x25de21=a15_0x4bae;return _0x78d686[_0x25de21(0x22f)](_0x32652d,_0x5646ef);}};if('bOFrN'!==_0x43fc35(0x1db)){if(_0x527c3d){const _0x3352cd=_0x2239c9[_0x43fc35(0x257)](_0xf9df7d,arguments);return _0x116f2a=null,_0x3352cd;}}else{if(_0x78d686['dRRpr'](typeof _0x37f6df,_0x78d686['PxjWM']))return function(_0x97d7f2){}[_0x43fc35(0x1d3)](_0x78d686[_0x43fc35(0x21a)])[_0x43fc35(0x257)](_0x78d686[_0x43fc35(0x1b4)]);else{if(_0x78d686['dRRpr'](_0x78d686[_0x43fc35(0x1fa)],_0x43fc35(0x232))){if(_0x78d686[_0x43fc35(0x1aa)]('',_0x78d686[_0x43fc35(0x1b5)](_0x37f6df,_0x37f6df))[_0x43fc35(0x21d)]!==0x1||_0x78d686[_0x43fc35(0x247)](_0x78d686[_0x43fc35(0x240)](_0x37f6df,0x14),0x0)){if(_0x78d686['dpmqz'](_0x78d686[_0x43fc35(0x1a5)],_0x78d686[_0x43fc35(0x1a5)])){const _0x120b6a=_0x54bfbe?function(){const _0x14995c=_0x43fc35;if(_0x3d3009){const _0xf33b58=_0x2d2fd2[_0x14995c(0x257)](_0x236600,arguments);return _0x1218f7=null,_0xf33b58;}}:function(){};return _0x5aeffa=![],_0x120b6a;}else(function(){const _0x10b5f1=_0x43fc35,_0xc16487={'WmIxT':'function\x20*\x5c(\x20*\x5c)','oZTfY':_0x10b5f1(0x1a9),'crhNj':function(_0x19a04a,_0x5f3d10){return _0x78d686['oLypc'](_0x19a04a,_0x5f3d10);},'gKLNl':_0x78d686[_0x10b5f1(0x248)],'UHcUm':function(_0x26aa8d,_0x27264c){return _0x26aa8d+_0x27264c;},'TZcCH':_0x78d686['fmtLM'],'nQADm':'input'};if(_0x78d686[_0x10b5f1(0x1f6)](_0x78d686[_0x10b5f1(0x1d9)],_0x10b5f1(0x199)))_0x39d298[_0x10b5f1(0x190)](_0x7ac6da,this,function(){const _0x28198e=_0x10b5f1,_0x11c226=new _0xea5c06(_0xc16487['WmIxT']),_0x2f4ca3=new _0x4f8892(_0xc16487[_0x28198e(0x23d)],'i'),_0x3da541=_0xc16487[_0x28198e(0x1c4)](_0x45a5da,_0xc16487[_0x28198e(0x21e)]);!_0x11c226[_0x28198e(0x1ee)](_0xc16487[_0x28198e(0x21b)](_0x3da541,_0xc16487[_0x28198e(0x214)]))||!_0x2f4ca3[_0x28198e(0x1ee)](_0x3da541+_0xc16487[_0x28198e(0x198)])?_0xc16487[_0x28198e(0x1c4)](_0x3da541,'0'):_0x15ab39();})();else return!![];}[_0x43fc35(0x1d3)](_0x78d686[_0x43fc35(0x223)](_0x78d686['oBXdQ'],_0x78d686[_0x43fc35(0x1de)]))[_0x43fc35(0x1b8)](_0x78d686[_0x43fc35(0x21f)]));}else{if(_0x78d686[_0x43fc35(0x19a)](_0x78d686[_0x43fc35(0x1bb)],_0x78d686[_0x43fc35(0x251)]))(function(){return![];}[_0x43fc35(0x1d3)](_0x43fc35(0x252)+_0x78d686['SWkXB'])[_0x43fc35(0x257)](_0x43fc35(0x249)));else{let _0x23dcbc;try{_0x23dcbc=_0x302e81(_0x78d686['mFBsY'](_0x78d686[_0x43fc35(0x1c9)](_0x78d686[_0x43fc35(0x23b)],_0x78d686['exhFT']),');'))();}catch(_0x966e76){_0x23dcbc=_0x1aec79;}return _0x23dcbc;}}}else{if(_0x2589ac)return _0x529637;else _0x39d298[_0x43fc35(0x1a4)](_0x410e3d,0x0);}}_0x78d686[_0x43fc35(0x1af)](_0x548066,++_0x37f6df);}}try{if(_0x78d686['xldJg'](_0x78d686[_0x46cf7f(0x1dc)],_0x78d686['LDAaT'])){if(_0x3420dd)return _0x548066;else _0x78d686['yJKsa'](_0x548066,0x0);}else(function(){return!![];}['constructor'](_0x78d686['slRfG'](_0x78d686[_0x46cf7f(0x1ab)],_0x78d686[_0x46cf7f(0x1de)]))['call'](_0x78d686[_0x46cf7f(0x21f)]));}catch(_0x35814a){}}